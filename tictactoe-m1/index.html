<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>
    
    Tic Tac Toe, Milestone 1: minimax • ECEN 330
    
</title>

<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<!-- Custom styles for this template -->
<link rel="stylesheet" href=/ecen330/css/main.css>

<!-- <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet"> -->
<!-- <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="https://use.typekit.net/jcn6ybb.css">

<!-- <link rel="icon" type="image/png" sizes="96x96" href=/ecen330/icon/favicon-96x96.png>
<link rel="icon" type="image/png" sizes="32x32" href=/ecen330/icon/favicon-32x32.png>
<link rel="icon" type="image/png" sizes="16x16" href=/ecen330/icon/favicon-16x16.png> -->

<script src="https://kit.fontawesome.com/624d595ebf.js" crossorigin="anonymous"></script>

</head>

<body>
  <div class="d-flex" id="wrapper">
    <div class="border-right sidebar-color" id="sidebar-wrapper">
    <div class="sidebar-sticky">
        <div class="sidebar-heading-big">
            <a href="/ecen330/">
                ECEN 330</a>
        </div>
        <div class="list-group list-group-flush sidebar-color">

            

            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <!-- <a href="https://slack.com/app_redirect?team=T01J887F8MU&channel=C01JF1N6TH8"
                class="list-item-normal list-group-item list-group-item-action sidebar-item" target="_blank"><i
                    class="fa fa-question-circle"></i>
                Slack</a> -->

        </div>

        <div class="sidebar-heading">Setup</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen330/setup/step-1/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Setup Step #1

            </a>
            
            <a href="/ecen330/setup/linux/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                &emsp;

                Home Setup: Linux

            </a>
            
            <a href="/ecen330/setup/vm/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                &emsp;

                Home Setup: VM

            </a>
            
            <a href="/ecen330/setup/step-2/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Setup Step #2

            </a>
            
        </div>

        <div class="sidebar-heading">Labs</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen330/labs/hello-world/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">1</span>
                Hello World

            </a>
            
            <a href="/ecen330/labs/switches-buttons/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">2</span>
                Switches/Buttons Driver

            </a>
            
            <a href="/ecen330/labs/timer/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">3</span>
                Timer Driver

            </a>
            
            <a href="/ecen330/labs/clock/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">4</span>
                Clock

            </a>
            
            <a href="/ecen330/labs/tictactoe/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">5</span>
                Tic Tac Toe

            </a>
            
            <a href="/ecen330/labs/simon/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">6</span>
                Simon

            </a>
            
            <a href="/ecen330/labs/project/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">7</span>
                Choose Your Own

            </a>
            
            <a href="/ecen330/labs/wam/"
                class="list-item-normal list-group-item list-group-item-action bg-light sidebar-item">
                <span class="badge badge-pill badge-dark-grey">7-alt</span>
                Whack-a-Mole

            </a>
            
        </div>

        <div class="sidebar-heading">Documentation</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen330/documentation/compiling/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Compiling and Running

            </a>
            
            <a href="/ecen330/documentation/cmake/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                CMake

            </a>
            
            <a href="/ecen330/documentation/headers/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Header Files

            </a>
            
            <a href="/ecen330/documentation/submission/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Submitting Code

            </a>
            
            <a href="/ecen330/documentation/vscode/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Coding/Debugging Tips

            </a>
            
        </div>

        <div class="sidebar-heading">Other</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen330/other/kr-study-questions/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                K&R Study Questions

            </a>
            
            <a href="/ecen330/other/coding-standard/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Coding Standard

            </a>
            
            <a href="/ecen330/other/coding-state-machines/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Coding State Machines

            </a>
            
            <a href="/ecen330/other/suggestions/"
                class="list-item-narrow list-group-item list-group-item-action bg-light sidebar-item">
                

                Suggestions

            </a>
            
        </div>
    </div>
</div>

    <!-- Page Content -->
    <div id="page-content-wrapper">

      <nav class="navbar sticky-top navbar-expand-lg border-bottom">
        <button class="btn btn-brand" id="menu-toggle">
          <i class="fas fa-bars"></i>
        </button>

        <a href="" class="navbar-brand mb-0 h1 page-title-bar text-center mx-auto" id="page-title-bar"></a>

        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link btn btn-brand suggest-edits" target="_blank" rel="noopener noreferrer"
              href="https://piazza.com/byu/spring2022/ecen330"><i class="far fa-question-circle"></i> Piazza</a>
          </li>

          <li class="nav-item">
            <a class="nav-link btn btn-brand suggest-edits" target="_blank" rel="noopener noreferrer"
              href="https://github.com/byu-cpe/ecen330/issues/new?labels=website&title=Updates to Tic Tac Toe, Milestone 1: minimax page"><i
                class="fab fa-github"></i> Suggest
              Edits</a>
          </li>
        </ul>
      </nav>

      <div class="container">
        <article class="page">
  <h1 class="page-title" id="page-title">
    
    Tic Tac Toe, Milestone 1: minimax
  </h1>

  <div class="page-content">
    

    <p>In this milestone you will implement the algorithm for the computer player. If you are successful, it will be impossible to beat the computer when you play against it. We will be using an algorithm called minimax (or something close, anyway). The algorithm is often used to create a computer-player in a two-player game such as Tic-Tac-Toe.</p>

<p>A very good description using minimax to implement a computer-player for Tic-Tac-Toe can be found <a href="http://www.neverstopbuilding.com/minimax">http://www.neverstopbuilding.com/minimax</a>. I also archived it as <a href="/ecen330/media/lab5/minimax.pdf">PDF</a>.</p>

<p>I have annotated some of the figures and will discuss these in class.</p>

<p><img src="/ecen330/media/lab5/tictactoegametreenotes1.jpg" width="800" alt="minimax example diagram #1" /></p>

<hr />

<p><img src="/ecen330/media/lab5/tictactoegametreenotes2.jpg" width="800" alt="minimax example diagram #2" /></p>

<h2 id="tic-tac-toe-minimax-pseudocode">Tic-Tac-Toe Minimax Pseudocode</h2>

<p>Here is some pseudocode that describes the algorithm in more detail. This should be helpful after you have carefully studied how the algorithm works and you start writing ‘C’ code.</p>

<p>Notes:</p>
<ul>
  <li>For the pseudocode shown below, <strong>choice</strong> is a global variable that will hold the move computed by minimax. Minimax must return at least a score because that is how you build the move-score table recursively. However, minimax must also compute the move because it is associated with the score. So, when doing the max calculation for example, you find the index of the highest score in the list and then save the move associated with that score in <strong>choice</strong>. <strong>choice</strong> will be overwritten many times as minimax executes but that is OK. The only move you care about is the move associated with the max score at the first call of minimax. That will also be the last time that <strong>choice</strong> is written so it will contain the move you care about - the move associated with the highest score (assuming that you are ‘X’).</li>
  <li>move can be implemented as a struct containing a row and a column.</li>
  <li>You can store your moves and scores in two arrays: a moves array and a scores array. Use one index for both.</li>
</ul>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// current_player_is_x == true means X, current_player_is_x == false means O</span>
<span class="kt">int</span> <span class="nf">minimax</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">bool</span> <span class="n">current_player_is_x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">game</span> <span class="n">is</span> <span class="n">over</span><span class="p">)</span>   <span class="c1">// Recursion base case, there has been a win or a draw.</span>
    <span class="c1">// If game is over, you need to evaluate board based upon previous player/opponent.</span>
    <span class="k">return</span> <span class="n">score</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="o">!</span><span class="n">current_player_is_x</span><span class="p">);</span>  
  <span class="c1">// Otherwise, you need to recurse.</span>
  <span class="c1">// This loop will generate all possible boards.</span>
  <span class="k">for</span> <span class="n">all</span> <span class="n">rows</span> <span class="p">{</span>
    <span class="k">for</span> <span class="n">all</span> <span class="n">columns</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">==</span> <span class="n">EMPTY_SQUARE</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Assign the square to 'X'or 'O'.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">current_player_is_x</span><span class="p">)</span> 
          <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_SQUARE</span>
        <span class="k">else</span> 
          <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">O_SQUARE</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">minimax</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="o">!</span><span class="n">current_player_is_x</span><span class="p">)</span>
        <span class="n">add</span> <span class="n">score</span> <span class="n">to</span> <span class="n">move</span><span class="o">-</span><span class="n">score</span> <span class="n">table</span>
        <span class="n">add</span> <span class="n">move</span> <span class="n">to</span> <span class="n">move</span><span class="o">-</span><span class="n">score</span> <span class="n">table</span>
        <span class="c1">// Undo the change to the board (return the square to empty) prior to next iteration of for-loops.</span>
        <span class="n">board</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">EMPTY_SQUARE</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="c1">// Once you get here, you have iterated over empty squares at this level. All of the scores have been computed</span>
  <span class="c1">// in the move-score table for boards at this level. </span>
  <span class="c1">// Now you need to return the score depending upon whether you are computing min or max.</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">current_player_is_x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">choice</span> <span class="o">&lt;=</span> <span class="n">get</span> <span class="n">the</span> <span class="n">move</span> <span class="n">with</span> <span class="n">the</span> <span class="n">highest</span> <span class="n">score</span> <span class="n">in</span> <span class="n">the</span> <span class="n">move</span><span class="o">-</span><span class="n">score</span> <span class="n">table</span><span class="p">.</span>
    <span class="n">score</span> <span class="o">&lt;=</span> <span class="n">highest</span> <span class="n">score</span> <span class="n">in</span> <span class="n">the</span> <span class="n">move</span><span class="o">-</span><span class="n">score</span> <span class="n">table</span><span class="p">.</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">choice</span> <span class="o">&lt;=</span> <span class="n">get</span> <span class="n">the</span> <span class="n">move</span> <span class="n">with</span> <span class="n">the</span> <span class="n">lowest</span> <span class="n">score</span> <span class="n">in</span> <span class="n">the</span> <span class="n">move</span><span class="o">-</span><span class="n">score</span> <span class="n">table</span><span class="p">.</span>
    <span class="n">score</span> <span class="o">&lt;=</span> <span class="n">lowest</span> <span class="n">score</span> <span class="n">in</span> <span class="n">the</span> <span class="n">move</span><span class="o">-</span><span class="n">score</span> <span class="n">table</span><span class="p">.</span> 
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">score</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="suggestions">Suggestions</h2>
<ul>
  <li>I suggest that you develop your minimax algorithm on a regular computer. minimax doesn’t rely on anything provided by the 330 board and you will be able to debug more quickly because you won’t need to wait for downloads, etc. Once you get minimax working it is easy to bring it over to the emulator or the board.</li>
  <li>It is a good idea to have a printBoard routine that prints out a board. This is very useful when debugging.</li>
  <li>I found it helpful to break down a winning board into row-based wins, column-based wins, and diagonal-based wins.</li>
  <li>You can add a depth argument to minimax that can be helpful during debugging. You invoke minimax with a depth of 0 and have minimax print the depth variable when invoked and then incrementing the depth variable when recursing.</li>
</ul>

<h2 id="debugging-recursive-minimax">Debugging Recursive Minimax</h2>
<p>Often the best way to debug recursive programs is to print out an execution trace. Adding a “depth” argument that you increment at each invocation makes it much easier to follow program execution.</p>

<p>A debug dump of my minimax program is shown below. The starting board is the same as the board we used in class and is the same one in the game-trees shown above. I have annotated the dump with the board-numbers used in the example shown above.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Invoking minimax @ depth = 0
**Board 1**
0 X
X  
X00
adding player @ (0, 1)

Invoking minimax @ depth = 1
**Board 3**
0XX
X  
X00
adding opponent @ (1, 1)

Invoking minimax @ depth = 2
**Board 5**
0XX
X0 
X00
opponent wins, returning score: -10
adding opponent @ (1, 2)

Invoking minimax @ depth = 2
**Board 6**
0XX
X 0
X00
adding player @ (1, 1)

Invoking minimax @ depth = 3
**Board 9**
0XX
XX0
X00
player wins, returning score: 10
adding player @ (1, 1)

Invoking minimax @ depth = 1
**Board 2**
0 X
XX 
X00
player wins, returning score: 10
adding player @ (1, 2)

Invoking minimax @ depth = 1
**Board 4**
0 X
X X
X00
adding opponent @ (0, 1)

Invoking minimax @ depth = 2
-- Starting board -- **Board 8**
00X
X X
X00
adding player @ (1, 1)

Invoking minimax @ depth = 3
**Board 10**
00X
XXX
X00
player wins, returning score: 10
adding opponent @ (1, 1)

Invoking minimax @ depth = 2
**Board 7**
0 X
X0X
X00
opponent wins, returning score: -10
final score: 10
final choice: (row: 1, column: 1)

</code></pre></div></div>

<h2 id="requirements">Requirements</h2>
<ul>
  <li>You will write one file: <em>minimax.c</em>. <em>minimax.h</em> is provided, and must not be changed.</li>
  <li>You must provide the functions listed below via the .h file. You must use these data-structures, #define, etc., for the listed functions. Please implement helper functions in the .c file (not advertised in the .h file) to make your code modular and easier to read and to debug.</li>
  <li>You must test your minimax algorithm by writing at least 10 additional test-boards (see provided test code below). The TA will check for this.</li>
</ul>

<p><a href="https://github.com/byu-cpe/ecen330_student/blob/master/lab5/minimax.h">minimax.h</a></p>

<h2 id="pass-off">Pass-Off</h2>
<p>To pass the algorithm milestone, you need to demonstrate your minimax program providing the correct answer for several provided boards and <strong>for 10 additional boards</strong> that you must write. After adding your test boards to the provided test code, test your minimax program using the program shown below.</p>

<ul>
  <li><a href="https://github.com/byu-cpe/ecen330_student/blob/master/lab5/testBoards.c">testBoards.c</a></li>
</ul>

<p><strong>Note: if your minimax algorithm passes these tests, you may still have bugs in your code. These tests are not exhaustive. I strongly advise you to test your minimax code much more thoroughly. Otherwise, you will find that you game may not be unbeatable in the final milestone.</strong></p>

  </div>
</article>
      </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
<script src=/ecen330/js/jquery.visible.min.js></script>

<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    var prevVisible = $('#page-title').visible();

    $(window).scroll(function () {
        currentVisible = $('#page-title').visible()
        if (prevVisible && !currentVisible) {
            console.log("Do something!");
            $("#page-title-bar").html($('#page-title').text());
        }

        if (!prevVisible && currentVisible) {
            $("#page-title-bar").html("")
        }

        prevVisible = currentVisible;
    });

</script>

</body>

</html>